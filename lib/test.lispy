(func {test msg body} {do
    (print "RUN -" msg)
    (:= {i} 0)
    (:= {r} 1)
    (func {expect a b} {do
        (if (!= a b) {do
            (print " * FAIL expect #" (+ 1 i) ":" "expect:" b "got:" a)
            (= {r} 0)
        })
        (= {i} (+ i 1))
    })    
    (block body)
    (if r 
        {print "PASS"}
        {print "FAIL"}
    )
})
